<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ayurveez: BAMS Made Easy</title>
    <style>
        /* [ALL THE CSS FROM BEFORE - SAME AS BEFORE] */
        /* ... include all CSS styles from previous version ... */
    </style>
</head>
<body>
    <div id="root"></div>

    <script>
        // ====================== CONSTANTS ======================
        const PAYMENT_UPI_ID = "thersk@axl";
        const WHATSAPP_NUMBER = "9376884568";
        const WHATSAPP_LINK = `https://wa.me/91${WHATSAPP_NUMBER}`;
        const MASTER_ACCESS_CODE = "AYU-VEDA-2024";
        const GEMINI_API_KEY = "YOUR_GEMINI_API_KEY_HERE"; // ⬅️ REPLACE THIS

        // ====================== AI SERVICE ======================
        class RealGeminiService {
            constructor(apiKey) {
                this.apiKey = apiKey;
            }

            async generateAyurvedaResponse(userPrompt) {
                // If no API key or using placeholder, use mock responses
                if (!this.apiKey || this.apiKey === 'YOUR_GEMINI_API_KEY_HERE') {
                    return this.getMockResponse(userPrompt);
                }

                try {
                    const response = await fetch(
                        `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key=${this.apiKey}`,
                        {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify({
                                contents: [{
                                    parts: [{
                                        text: userPrompt
                                    }]
                                }],
                                system_instruction: {
                                    parts: [{
                                        text: `You are 'AyurBot', a wise and knowledgeable Ayurvedic expert and clinical professor for BAMS students.
                                        Your name is Ayurveez Assistant.
                                        You have deep knowledge of Charaka Samhita, Sushruta Samhita, Ashtanga Hridaya, and modern clinical correlation.
                                        
                                        Guidelines:
                                        1. Answer student queries regarding subjects, textbooks, slokas, and clinical treatments.
                                        2. Use a polite, scholarly, yet accessible tone.
                                        3. If asked about treatments, provide the Ayurvedic perspective but always include a disclaimer that this is for educational purposes.
                                        4. Keep answers concise but informative. 
                                        5. If the query is unrelated to Ayurveda or medicine, politely steer the conversation back to Ayurveda.
                                        6. Always respond in English unless specifically asked for Sanskrit terms.`
                                    }]
                                },
                                generationConfig: {
                                    temperature: 0.7,
                                    maxOutputTokens: 1000,
                                    topP: 0.8,
                                    topK: 40
                                }
                            })
                        }
                    );
                    
                    if (!response.ok) {
                        const errorText = await response.text();
                        throw new Error(`API Error ${response.status}: ${errorText}`);
                    }
                    
                    const data = await response.json();
                    
                    if (data.candidates && data.candidates[0] && data.candidates[0].content) {
                        return data.candidates[0].content.parts[0].text;
                    } else {
                        console.warn('Unexpected API response:', data);
                        return this.getMockResponse(userPrompt);
                    }
                    
                } catch (error) {
                    console.error('Gemini API Error:', error);
                    return "I am currently experiencing technical difficulties. For now, here's a related answer: " + this.getMockResponse(userPrompt);
                }
            }

            getMockResponse(userPrompt) {
                const lowerPrompt = userPrompt.toLowerCase();
                
                const responses = {
                    'dosha': "According to Ayurveda, there are three doshas: Vata (air/space), Pitta (fire/water), and Kapha (earth/water). Balance is key to health.",
                    'triphala': "Triphala is a classic Ayurvedic formulation: Amalaki, Bibhitaki, Haritaki. Supports digestion and balances all three doshas.",
                    'charaka': "Charaka Samhita is a foundational Ayurvedic text focusing on internal medicine and holistic healing.",
                    'panchakarma': "Panchakarma includes five purification procedures for detoxification under professional supervision.",
                    'herb': "Common Ayurvedic herbs: Turmeric (anti-inflammatory), Ashwagandha (adaptogen), Tulsi (immune support), Ginger (digestive aid).",
                    'default': "Namaste! I'm Ayurveez Assistant. I can help with Ayurvedic principles, herbs, treatments, and BAMS curriculum."
                };

                for (const [key, response] of Object.entries(responses)) {
                    if (lowerPrompt.includes(key) && key !== 'default') {
                        return response;
                    }
                }
                return responses.default;
            }
        }

        // ====================== REST OF THE CODE ======================
        // [INCLUDE ALL THE REST OF THE JAVASCRIPT FROM BEFORE]
        // ChatBot, AccessModal, AyurveezApp classes
        // Curriculum data, generateChapters function
        // Everything else remains the same
        
    </script>
</body>
</html>
